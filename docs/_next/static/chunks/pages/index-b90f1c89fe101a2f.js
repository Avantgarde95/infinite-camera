(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9889)}])},9889:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return U}});var r=t(5893),i=t(7294),a=t(5934);var o=t(4051),u=t.n(o),c=t(4480);var f=function(){},l=f,s=f,d=(0,c.cn)({key:"cameras",default:[]}),v=(0,c.cn)({key:"currentCameraIndex",default:0});function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function p(e,n,t,r,i,a,o){try{var u=e[a](o),c=u.value}catch(f){return void t(f)}u.done?n(c):Promise.resolve(c).then(r,i)}function m(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(c){u=!0,i=c}finally{try{o||null==t.return||t.return()}finally{if(u)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return h(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=void 0;function b(){"undefined"!==typeof document&&"undefined"===typeof y&&((y=document.createElement("video")).muted=!0,l("Created the video element."))}function w(e){var n=m((0,c.FV)(d),2),t=n[0],r=n[1],a=(0,c.sJ)(v);return(0,i.useEffect)((function(){b()}),[]),(0,i.useEffect)((function(){var e;(e=u().mark((function e(){var n,i,a,o,c,f,d,v,h,p,m,y,b,w;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l("Stopping the existing tracks for safety..."),n=!0,i=!1,a=void 0,e.prev=2,o=t[Symbol.iterator]();!(n=(c=o.next()).done);n=!0)c.value.mediaStream.getTracks().forEach((function(e){return e.stop()}));e.next=10;break;case 6:e.prev=6,e.t0=e.catch(2),i=!0,a=e.t0;case 10:e.prev=10,e.prev=11,n||null==o.return||o.return();case 13:if(e.prev=13,!i){e.next=16;break}throw a;case 16:return e.finish(13);case 17:return e.finish(10);case 18:return e.next=20,navigator.mediaDevices.enumerateDevices();case 20:f=e.sent.filter((function(e){return"videoinput"===e.kind})),l("Got the cameras: ".concat(f.map((function(e){return"".concat(e.deviceId,": ").concat(e.label)})).join(", "))),d=[],v=!0,h=!1,p=void 0,e.prev=24,m=f[Symbol.iterator]();case 26:if(v=(y=m.next()).done){e.next=41;break}return b=y.value,e.prev=28,e.next=31,navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:b.deviceId}});case 31:w=e.sent,d.push({mediaDeviceInfo:b,mediaStream:w}),e.next=38;break;case 35:e.prev=35,e.t1=e.catch(28),s(e.t1);case 38:v=!0,e.next=26;break;case 41:e.next=47;break;case 43:e.prev=43,e.t2=e.catch(24),h=!0,p=e.t2;case 47:e.prev=47,e.prev=48,v||null==m.return||m.return();case 50:if(e.prev=50,!h){e.next=53;break}throw p;case 53:return e.finish(50);case 54:return e.finish(47);case 55:l("Retrieved the streams of ".concat(d.map((function(e){return e.mediaDeviceInfo.deviceId})).join(", "))),r(d);case 57:case"end":return e.stop()}}),e,null,[[2,6,10,18],[11,,13,17],[24,43,47,55],[28,35],[48,,50,54]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){p(a,r,i,o,u,"next",e)}function u(e){p(a,r,i,o,u,"throw",e)}o(void 0)}))})()}),[r]),(0,i.useEffect)((function(){"undefined"!==typeof y&&(a>=t.length||(y.srcObject=t[a].mediaStream,y.oncanplaythrough=function(){"undefined"!==typeof y&&e(y)},y.play()))}),[t,a,e]),{video:y}}function g(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function x(){var e=g(["\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n\n  width: 100%;\n  aspect-ratio: 1/1;\n"]);return x=function(){return e},e}function j(){var e=g(["\n  width: 100%;\n  height: 100%;\n"]);return j=function(){return e},e}var k=a.Z.div(x()),I=a.Z.canvas(j()),S=function(){var e,n=function(){var e=(0,i.useRef)(null);return{setCanvasRef:function(n){if(null!==n&&(e.current=n.getContext("2d"),null===e.current))throw new Error("Can't retrieve the context!")},contextRef:e}}(),t=n.setCanvasRef,a=n.contextRef.current,o=w((function(e){if(null!==a){var n=512,t=e.videoHeight/(e.videoWidth/n);e.width=n,e.height=t,a.canvas.width=Math.min(n,t),a.canvas.height=Math.min(n,t)}})).video;return e=function(){null!==a&&"undefined"!==typeof o&&(function(e){e.fillStyle="#000000",e.fillRect(0,0,e.canvas.width,e.canvas.height)}(a),a.save(),a.translate(a.canvas.width,0),a.scale(-1,1),a.drawImage(o,0,0),a.restore())},(0,i.useEffect)((function(){var n=setInterval((function(){e()}),1e3/30);return function(){clearInterval(n)}}),[e]),(0,r.jsx)(k,{children:(0,r.jsx)(I,{ref:t})})},O=t(3321),E=t(1601),A=t(5819);function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function C(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(c){u=!0,i=c}finally{try{o||null==t.return||t.return()}finally{if(u)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return _(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function P(){var e=Z(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n\n  width: 100%;\n  margin-top: 1rem;\n"]);return P=function(){return e},e}function R(){var e=Z(["\n  width: 4rem;\n  height: 4rem;\n  border: 0;\n  border-radius: 50%;\n\n  background-color: ",";\n"]);return R=function(){return e},e}var z=a.Z.div(P()),D=(0,a.Z)(O.Z)(R(),(function(e){return e.theme.color.foreground2})),N=function(){var e=(0,c.sJ)(d),n=C((0,c.FV)(v),2),t=n[0],i=n[1];return(0,r.jsxs)(z,{children:[(0,r.jsx)(D,{}),(0,r.jsx)(E.Z,{value:t,onChange:function(e){i(Number(e.target.value))},children:e.map((function(e,n){return(0,r.jsx)(A.Z,{value:n,children:e.mediaDeviceInfo.label},n)}))})]})};function M(){var e,n,t=(e=["\n  width: 100%;\n  height: 100%;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return M=function(){return t},t}var T=a.Z.div(M()),U=function(){return(0,r.jsxs)(T,{children:[(0,r.jsx)(S,{}),(0,r.jsx)(N,{})]})}}},function(e){e.O(0,[778,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);