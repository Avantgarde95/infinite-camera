(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(400)}])},400:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return J}});var r=t(5893),i=t(7294),u=t(5934);var a=t(4051),o=t.n(a),c=t(4480);function f(){return"undefined"!==typeof document}var l=function(){},s=l,d=l,v=(0,c.cn)({key:"cameras",default:[]}),h=(0,c.cn)({key:"currentCameraIndex",default:0});function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function y(e,n,t,r,i,u,a){try{var o=e[u](a),c=o.value}catch(f){return void t(f)}o.done?n(c):Promise.resolve(c).then(r,i)}function m(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var u=e.apply(n,t);function a(e){y(u,r,i,a,o,"next",e)}function o(e){y(u,r,i,a,o,"throw",e)}a(void 0)}))}}function b(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,u=[],a=!0,o=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(u.push(r.value),!n||u.length!==n);a=!0);}catch(c){o=!0,i=c}finally{try{a||null==t.return||t.return()}finally{if(o)throw i}}return u}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return p(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=void 0,x=[];function g(){return j.apply(this,arguments)}function j(){return(j=m(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f()&&"undefined"===typeof w&&((w=document.createElement("video")).muted=!0,s("Created the video element."));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return O.apply(this,arguments)}function O(){return(O=m(o().mark((function e(){var n,t,r,i,u,a,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f()){e.next=2;break}return e.abrupt("return");case 2:if(!(x.length>0)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,navigator.mediaDevices.enumerateDevices();case 6:n=e.sent.filter((function(e){return"videoinput"===e.kind})),x=[],t=!0,r=!1,i=void 0,e.prev=9,u=n[Symbol.iterator]();case 11:if(t=(a=u.next()).done){e.next=26;break}return c=a.value,e.prev=13,e.next=16,navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:c.deviceId}});case 16:l=e.sent,x.push({label:c.label,mediaStream:l}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),d(e.t0);case 23:t=!0,e.next=11;break;case 26:e.next=32;break;case 28:e.prev=28,e.t1=e.catch(9),r=!0,i=e.t1;case 32:e.prev=32,e.prev=33,t||null==u.return||u.return();case 35:if(e.prev=35,!r){e.next=38;break}throw i;case 38:return e.finish(35);case 39:return e.finish(32);case 40:case"end":return e.stop()}}),e,null,[[9,28,32,40],[13,20],[33,,35,39]])})))).apply(this,arguments)}function S(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function I(){var e=S(["\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n\n  width: 100%;\n  aspect-ratio: 1/1;\n"]);return I=function(){return e},e}function A(){var e=S(["\n  width: 100%;\n  height: 100%;\n"]);return A=function(){return e},e}var E=u.Z.div(I()),_=u.Z.canvas(A()),C=function(){var e=function(){var e=(0,i.useRef)(null);return{setCanvasRef:function(n){if(null!==n&&(e.current=n.getContext("2d"),null===e.current))throw new Error("Can't retrieve the context!")},contextRef:e}}(),n=e.setCanvasRef,t=e.contextRef.current;return function(e){var n=b((0,c.FV)(v),2),t=n[0],r=n[1],u=(0,c.sJ)(h);(0,i.useEffect)((function(){m(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return e.next=4,k();case 4:r(x.map((function(e){return{label:e.label}})));case 5:case"end":return e.stop()}}),e)})))()}),[]),(0,i.useEffect)((function(){"undefined"!==typeof w&&(u>=x.length||(w.pause(),w.srcObject=x[u].mediaStream,w.oncanplaythrough=function(){"undefined"!==typeof w&&e.onPlay(w)},w.play()))}),[t,u]),(0,i.useEffect)((function(){var n=setInterval((function(){"undefined"!==typeof w&&e.onFrame(w)}),1e3/30);return function(){clearInterval(n)}}),[w,e.onFrame])}({onPlay:function(e){if(null!==t){var n=512,r=e.videoHeight/(e.videoWidth/n);e.width=n,e.height=r,t.canvas.width=Math.min(n,r),t.canvas.height=Math.min(n,r),function(e){e.fillStyle="#000000",e.fillRect(0,0,e.canvas.width,e.canvas.height)}(t),console.log(n,r)}},onFrame:function(e){null!==t&&t.drawImage(e,0,0)}}),(0,r.jsx)(E,{children:(0,r.jsx)(_,{ref:n})})};function P(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function z(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,u=[],a=!0,o=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(u.push(r.value),!n||u.length!==n);a=!0);}catch(c){o=!0,i=c}finally{try{a||null==t.return||t.return()}finally{if(o)throw i}}return u}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return P(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function R(){var e=N(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n\n  width: 100%;\n  margin-top: 1rem;\n"]);return R=function(){return e},e}function F(){var e=N(["\n  width: 4rem;\n  height: 4rem;\n  border: 0;\n  border-radius: 50%;\n\n  background-color: ",";\n"]);return F=function(){return e},e}var M=u.Z.div(R()),Z=u.Z.button(F(),(function(e){return e.theme.color.foreground2})),T=function(){var e=(0,c.sJ)(v),n=z((0,c.FV)(h),2),t=(n[0],n[1]);return(0,r.jsxs)(M,{children:[(0,r.jsx)(Z,{}),(0,r.jsx)("select",{onChange:function(e){t(Number(e.target.options[e.target.selectedIndex].value))},children:e.map((function(e,n){return(0,r.jsx)("option",{value:n,children:e.label},n)}))})]})};function D(){var e,n,t=(e=["\n  width: 100%;\n  height: 100%;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return D=function(){return t},t}var U=u.Z.div(D()),J=function(){return(0,r.jsxs)(U,{children:[(0,r.jsx)(C,{}),(0,r.jsx)(T,{})]})}}},function(e){e.O(0,[774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);