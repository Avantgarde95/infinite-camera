(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(1677)}])},1677:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Y}});var r=t(5893),a=t(7294),i=t(5934),o=t(4480);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var u=t(4051),f=t.n(u);var l=function(){},s=l,d=l,h=(0,o.cn)({key:"cameras",default:[]}),v=(0,o.cn)({key:"currentCameraIndex",default:0}),m=(0,o.cn)({key:"flipCamera",default:!0}),p=(0,o.cn)({key:"shotCamera",default:0});function y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function g(e,n,t,r,a,i,o){try{var c=e[i](o),u=c.value}catch(f){return void t(f)}c.done?n(u):Promise.resolve(u).then(r,a)}function w(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],o=!0,c=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(u){c=!0,a=u}finally{try{o||null==t.return||t.return()}finally{if(c)throw a}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return y(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=void 0;function x(){"undefined"!==typeof document&&"undefined"===typeof b&&((b=document.createElement("video")).muted=!0,s("Created the video element."))}function j(e){var n=w((0,o.FV)(h),2),t=n[0],r=n[1],i=(0,o.sJ)(v);return(0,a.useEffect)((function(){x()}),[]),(0,a.useEffect)((function(){var e;(e=f().mark((function e(){var n,a,i,o,c,u,l,h,v,m,p,y,g,w;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s("Stopping the existing tracks for safety..."),n=!0,a=!1,i=void 0,e.prev=2,o=t[Symbol.iterator]();!(n=(c=o.next()).done);n=!0)c.value.mediaStream.getTracks().forEach((function(e){return e.stop()}));e.next=10;break;case 6:e.prev=6,e.t0=e.catch(2),a=!0,i=e.t0;case 10:e.prev=10,e.prev=11,n||null==o.return||o.return();case 13:if(e.prev=13,!a){e.next=16;break}throw i;case 16:return e.finish(13);case 17:return e.finish(10);case 18:return e.next=20,navigator.mediaDevices.enumerateDevices();case 20:u=e.sent.filter((function(e){return"videoinput"===e.kind})),s("Got the cameras: ".concat(u.map((function(e){return"".concat(e.deviceId,": ").concat(e.label)})).join(", "))),l=[],h=!0,v=!1,m=void 0,e.prev=24,p=u[Symbol.iterator]();case 26:if(h=(y=p.next()).done){e.next=41;break}return g=y.value,e.prev=28,e.next=31,navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:g.deviceId}});case 31:w=e.sent,l.push({mediaDeviceInfo:g,mediaStream:w}),e.next=38;break;case 35:e.prev=35,e.t1=e.catch(28),d(e.t1);case 38:h=!0,e.next=26;break;case 41:e.next=47;break;case 43:e.prev=43,e.t2=e.catch(24),v=!0,m=e.t2;case 47:e.prev=47,e.prev=48,h||null==p.return||p.return();case 50:if(e.prev=50,!v){e.next=53;break}throw m;case 53:return e.finish(50);case 54:return e.finish(47);case 55:s("Retrieved the streams of ".concat(l.map((function(e){return e.mediaDeviceInfo.deviceId})).join(", "))),r(l);case 57:case"end":return e.stop()}}),e,null,[[2,6,10,18],[11,,13,17],[24,43,47,55],[28,35],[48,,50,54]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){g(i,r,a,o,c,"next",e)}function c(e){g(i,r,a,o,c,"throw",e)}o(void 0)}))})()}),[r]),(0,a.useEffect)((function(){"undefined"!==typeof b&&(i>=t.length||(b.srcObject=t[i].mediaStream,b.oncanplaythrough=function(){"undefined"!==typeof b&&e(b)},b.play()))}),[t,i,e]),{video:b}}function k(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function S(){var e=k(["\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n\n  width: 100%;\n  aspect-ratio: 1/1;\n"]);return S=function(){return e},e}function D(){var e=k(["\n  width: 100%;\n  height: 100%;\n"]);return D=function(){return e},e}var I=i.Z.div(S()),C=i.Z.canvas(D()),E=function(){var e,n=(0,o.sJ)(m),t=(0,o.sJ)(p),i=function(){var e=(0,a.useRef)(null);return{setCanvasRef:function(n){if(null!==n&&(e.current=n.getContext("2d"),null===e.current))throw new Error("Can't retrieve the context!")},contextRef:e}}(),u=i.setCanvasRef,f=i.contextRef.current,l=j((function(e){if(null!==f){var n=512,t=e.videoHeight/(e.videoWidth/n);e.width=n,e.height=t,f.canvas.width=Math.min(n,t),f.canvas.height=Math.min(n,t)}})).video;return e=function(){if(null!==f&&"undefined"!==typeof l){f.clearRect(0,0,f.canvas.width,f.canvas.height),f.save(),n&&(f.translate(f.canvas.width,0),f.scale(-1,1)),f.drawImage(l,0,0),f.restore(),f.fillStyle="white",f.font="18px sans-serif",f.fillText("\u221e Infinite loop coding",f.canvas.width-200,30);var e,t=function(e){var n=e.hour%12;return{year:"".concat(e.year),month:"".concat(e.month+1).padStart(2,"0"),monthDay:"".concat(e.monthDay+1).padStart(2,"0"),weekDay:c[e.weekDay%7].slice(0,3),hour:"".concat(0===n?12:n),minute:"".concat(e.minute).padStart(2,"0"),ampm:e.hour>=12?"PM":"AM"}}({year:(e=new Date).getFullYear(),month:e.getMonth(),monthDay:e.getDate()-1,weekDay:e.getDay(),hour:e.getHours(),minute:e.getMinutes()});f.fillText("".concat(t.year,".").concat(t.month,".").concat(t.monthDay," (").concat(t.weekDay,")"),10,f.canvas.height-40),f.fillText("".concat(t.hour,":").concat(t.minute," ").concat(t.ampm),10,f.canvas.height-20)}},(0,a.useEffect)((function(){var n=setInterval((function(){e()}),1e3/30);return function(){clearInterval(n)}}),[e]),(0,a.useEffect)((function(){if(!(t<=0)&&null!==f){var e=document.createElement("a");e.download="Download-".concat(t,".png");var n=f.canvas.toDataURL("image/png");e.href=n.replace(/^data:image\/png/,"data:application/octet-stream"),e.click()}}),[t,f]),(0,r.jsx)(I,{children:(0,r.jsx)(C,{ref:u})})},O=t(3321),A=t(1675),Z=t(8462),_=t(2185),M=t(2585),T=t(1649);function P(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function R(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],o=!0,c=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(u){c=!0,a=u}finally{try{o||null==t.return||t.return()}finally{if(c)throw a}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return P(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function F(){var e=z(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n\n  width: 100%;\n  margin-top: 1rem;\n"]);return F=function(){return e},e}function N(){var e=z(['\n  width: 4rem;\n  height: 4rem;\n  padding: 0;\n  border-radius: 50%;\n\n  &::after {\n    display: block;\n    content: "";\n\n    width: 3rem;\n    height: 3rem;\n    border-radius: 50%;\n    border: 1px solid ',";\n  }\n"]);return N=function(){return e},e}function J(){var e=z(["\n  width: 3rem;\n  height: 3rem;\n  min-width: auto;\n  border-radius: 50%;\n  padding: 0;\n"]);return J=function(){return e},e}function U(){var e=z(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n\n  font-size: 1.5rem;\n"]);return U=function(){return e},e}var V=i.Z.div(F()),H=(0,i.Z)(O.Z)(N(),(function(e){return e.theme.color.background})),W=(0,i.Z)(O.Z)(J()),X=i.Z.span(U()),$=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,o.sJ)(h),c=R((0,o.FV)(m),2),u=c[0],f=c[1],l=R((0,o.FV)(p),2),s=l[0],d=l[1],y=R((0,o.FV)(v),2),g=(y[0],y[1]),w=function(e){return function(){g(e),t(!1)}};return(0,r.jsxs)(V,{children:[(0,r.jsx)(W,{variant:"outlined",children:(0,r.jsx)(X,{children:(0,r.jsx)(M.kN6,{onClick:function(){f(!u)}})})}),(0,r.jsx)(H,{variant:"contained",onClick:function(){d(s+1)}}),(0,r.jsx)(W,{variant:"outlined",onClick:function(){t(!0)},children:(0,r.jsx)(X,{children:(0,r.jsx)(T.do9,{})})}),(0,r.jsx)(A.Z,{open:n,onClose:function(){t(!1)},children:(0,r.jsx)(Z.Z,{children:i.map((function(e,n){return(0,r.jsx)(_.ZP,{button:!0,onClick:w(n),children:e.mediaDeviceInfo.label},n)}))})})]})};function G(){var e,n,t=(e=["\n  width: 100%;\n  height: 100%;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return G=function(){return t},t}var L=i.Z.div(G()),Y=function(){return(0,r.jsxs)(L,{children:[(0,r.jsx)(E,{}),(0,r.jsx)($,{})]})}}},function(e){e.O(0,[866,980,409,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);