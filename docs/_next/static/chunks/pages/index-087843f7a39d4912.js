(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(6886)}])},6886:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return B}});var r=t(5893),a=t(7294),i=t(5934);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var o=t(4051),u=t.n(o);var f=function(){},s=f,d=f;function l(e,n,t,r,a,i,c){try{var o=e[i](c),u=o.value}catch(f){return void t(f)}o.done?n(u):Promise.resolve(u).then(r,a)}function v(e){var n=e.label.toLowerCase();return n.indexOf("front")>0?"Front":n.indexOf("back")>0?"Back":"Unknown"}function h(){var e=(0,a.useState)([]),n=e[0],t=e[1],r=(0,a.useState)(0),i=r[0],c=r[1];return(0,a.useEffect)((function(){var e;(e=u().mark((function e(){var r,a,i,o,f,l,h,m,p,x,y,w,g,b;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s("Stopping the existing tracks for safety..."),r=!0,a=!1,i=void 0,e.prev=2,o=n[Symbol.iterator]();!(r=(f=o.next()).done);r=!0)f.value.mediaStream.getTracks().forEach((function(e){return e.stop()}));e.next=10;break;case 6:e.prev=6,e.t0=e.catch(2),a=!0,i=e.t0;case 10:e.prev=10,e.prev=11,r||null==o.return||o.return();case 13:if(e.prev=13,!a){e.next=16;break}throw i;case 16:return e.finish(13);case 17:return e.finish(10);case 18:return e.next=20,navigator.mediaDevices.enumerateDevices();case 20:l=e.sent.filter((function(e){return"videoinput"===e.kind})),s("Got the cameras: ".concat(l.map((function(e){return"".concat(e.deviceId,": ").concat(e.label)})).join(", "))),h=[],m=!0,p=!1,x=void 0,e.prev=24,y=l[Symbol.iterator]();case 26:if(m=(w=y.next()).done){e.next=41;break}return g=w.value,e.prev=28,e.next=31,navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:g.deviceId}});case 31:b=e.sent,h.push({mediaDeviceInfo:g,mediaStream:b,type:v(g)}),e.next=38;break;case 35:e.prev=35,e.t1=e.catch(28),d(e.t1);case 38:m=!0,e.next=26;break;case 41:e.next=47;break;case 43:e.prev=43,e.t2=e.catch(24),p=!0,x=e.t2;case 47:e.prev=47,e.prev=48,m||null==y.return||y.return();case 50:if(e.prev=50,!p){e.next=53;break}throw x;case 53:return e.finish(50);case 54:return e.finish(47);case 55:if(s("Retrieved the streams of ".concat(h.map((function(e){return e.mediaDeviceInfo.deviceId})).join(", "))),!(h.length<=0)){e.next=58;break}return e.abrupt("return");case 58:t(h),c(0);case 60:case"end":return e.stop()}}),e,null,[[2,6,10,18],[11,,13,17],[24,43,47,55],[28,35],[48,,50,54]])})),function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function c(e){l(i,r,a,c,o,"next",e)}function o(e){l(i,r,a,c,o,"throw",e)}c(void 0)}))})()}),[t]),{cameras:n,currentCameraIndex:i,setCurrentCameraIndex:c}}var m=void 0;function p(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function x(){var e=p(["\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n\n  width: 100%;\n  aspect-ratio: 1/1;\n"]);return x=function(){return e},e}function y(){var e=p(["\n  width: 100%;\n  height: 100%;\n"]);return y=function(){return e},e}"undefined"!==typeof document&&"undefined"===typeof m&&((m=document.createElement("video")).muted=!0,s("Created the video element."));var w=i.Z.div(x()),g=i.Z.canvas(y()),b=function(e){var n=e.setCanvasRef;return(0,r.jsx)(w,{children:(0,r.jsx)(g,{ref:n})})},k=t(3321),j=t(1675),C=t(8462),D=t(2185),S=t(2585),I=t(1649);function O(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function E(){var e=O(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n\n  width: 100%;\n  margin-top: 1rem;\n"]);return E=function(){return e},e}function Z(){var e=O(['\n  width: 4rem;\n  height: 4rem;\n  padding: 0;\n  border-radius: 50%;\n\n  &::after {\n    display: block;\n    content: "";\n\n    width: 3rem;\n    height: 3rem;\n    border-radius: 50%;\n    border: 1px solid ',";\n  }\n"]);return Z=function(){return e},e}function _(){var e=O(["\n  width: 3rem;\n  height: 3rem;\n  min-width: auto;\n  border-radius: 50%;\n  padding: 0;\n"]);return _=function(){return e},e}function P(){var e=O(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n\n  font-size: 1.5rem;\n"]);return P=function(){return e},e}var T=i.Z.div(E()),M=(0,i.Z)(k.Z)(Z(),(function(e){return e.theme.color.background})),N=(0,i.Z)(k.Z)(_()),R=i.Z.span(P()),z=function(e){var n=e.cameraNames,t=e.onFlipCamera,i=e.onCaptureCamera,c=e.onSelectCamera,o=(0,a.useState)(!1),u=o[0],f=o[1];return(0,r.jsxs)(T,{children:[(0,r.jsx)(N,{variant:"outlined",children:(0,r.jsx)(R,{children:(0,r.jsx)(S.kN6,{onClick:t})})}),(0,r.jsx)(M,{variant:"contained",onClick:i}),(0,r.jsx)(N,{variant:"outlined",onClick:function(){f(!0)},children:(0,r.jsx)(R,{children:(0,r.jsx)(I.do9,{})})}),(0,r.jsx)(j.Z,{open:u,onClose:function(){f(!1)},children:(0,r.jsx)(C.Z,{children:n.map((function(e,n){return(0,r.jsx)(D.ZP,{button:!0,onClick:function(){!function(e){c(e),f(!1)}(n)},children:e},n)}))})})]})};function F(){var e,n,t=(e=["\n  width: 100%;\n  height: 100%;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return F=function(){return t},t}var U=i.Z.div(F()),B=function(){var e,n,t,i,o=(0,a.useState)(!1),u=o[0],f=o[1],s=h(),d=s.cameras,l=s.currentCameraIndex,v=s.setCurrentCameraIndex,p=function(){var e=(0,a.useRef)(null);return{setCanvasRef:function(n){if(null!==n&&(e.current=n.getContext("2d"),null===e.current))throw new Error("Can't retrieve the context!")},context:e.current}}(),x=p.setCanvasRef,y=p.context,w=l<d.length?d[l]:void 0,g=(e=null===w||void 0===w?void 0:w.mediaStream,n=function(e){if(null!==y){var n=512,t=e.videoHeight/(e.videoWidth/n);e.width=n,e.height=t,y.canvas.width=Math.min(n,t),y.canvas.height=Math.min(n,t)}},(0,a.useEffect)((function(){"undefined"!==typeof m&&"undefined"!==typeof e&&(m.srcObject=e,m.oncanplaythrough=function(){"undefined"!==typeof m&&n(m)},m.play())}),[e,n]),{video:m}).video;t=function(){if(null!==y&&"undefined"!==typeof g){var e=y.canvas.width,n=y.canvas.height;y.clearRect(0,0,e,n),y.save(),u&&(y.translate(e,0),y.scale(-1,1)),y.drawImage(g,0,0),y.restore(),y.fillStyle="white",y.font="18px sans-serif",y.fillText("\u221e Infinite loop coding",e-200,30);var t,r=function(e){var n=e.hour%12;return{year:"".concat(e.year),month:"".concat(e.month+1).padStart(2,"0"),monthDay:"".concat(e.monthDay+1).padStart(2,"0"),weekDay:c[e.weekDay%7].slice(0,3),hour:"".concat(0===n?12:n),minute:"".concat(e.minute).padStart(2,"0"),ampm:e.hour>=12?"PM":"AM"}}({year:(t=new Date).getFullYear(),month:t.getMonth(),monthDay:t.getDate()-1,weekDay:t.getDay(),hour:t.getHours(),minute:t.getMinutes()});y.fillText("".concat(r.year,".").concat(r.month,".").concat(r.monthDay," (").concat(r.weekDay,")"),10,n-40),y.fillText("".concat(r.hour,":").concat(r.minute," ").concat(r.ampm),10,n-20)}},i=30,(0,a.useEffect)((function(){var e=setInterval((function(){t()}),1e3/i);return function(){clearInterval(e)}}),[t,i]),(0,a.useEffect)((function(){"undefined"!==typeof w&&f("Back"!==w.type)}),[w,f]);return(0,r.jsxs)(U,{children:[(0,r.jsx)(b,{setCanvasRef:x}),(0,r.jsx)(z,{cameraNames:d.map((function(e,n){return"Camera ".concat(n+1," (Type: ").concat(e.type,")")})),onFlipCamera:function(){f(!u)},onCaptureCamera:function(){null!==y&&function(e,n){var t=document.createElement("a");t.download=n;var r=e.canvas.toDataURL("image/png");t.href=r.replace(/^data:image\/png/,"data:application/octet-stream"),t.click()}(y,"Download.png")},onSelectCamera:function(e){v(e)}})]})}}},function(e){e.O(0,[866,980,409,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);