(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9889)}])},9889:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return W}});var r=t(5893),i=t(7294),a=t(5934),o=t(4480);var c=t(4051),u=t.n(c);var f=function(){},l=f,s=f,d=(0,o.cn)({key:"cameras",default:[]}),v=(0,o.cn)({key:"currentCameraIndex",default:0}),h=(0,o.cn)({key:"flipCamera",default:!0}),p=(0,o.cn)({key:"shotCamera",default:0});function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function y(e,n,t,r,i,a,o){try{var c=e[a](o),u=c.value}catch(f){return void t(f)}c.done?n(u):Promise.resolve(u).then(r,i)}function b(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,c=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(u){c=!0,i=u}finally{try{o||null==t.return||t.return()}finally{if(c)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return m(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=void 0;function x(){"undefined"!==typeof document&&"undefined"===typeof w&&((w=document.createElement("video")).muted=!0,l("Created the video element."))}function g(e){var n=b((0,o.FV)(d),2),t=n[0],r=n[1],a=(0,o.sJ)(v);return(0,i.useEffect)((function(){x()}),[]),(0,i.useEffect)((function(){var e;(e=u().mark((function e(){var n,i,a,o,c,f,d,v,h,p,m,y,b,w;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l("Stopping the existing tracks for safety..."),n=!0,i=!1,a=void 0,e.prev=2,o=t[Symbol.iterator]();!(n=(c=o.next()).done);n=!0)c.value.mediaStream.getTracks().forEach((function(e){return e.stop()}));e.next=10;break;case 6:e.prev=6,e.t0=e.catch(2),i=!0,a=e.t0;case 10:e.prev=10,e.prev=11,n||null==o.return||o.return();case 13:if(e.prev=13,!i){e.next=16;break}throw a;case 16:return e.finish(13);case 17:return e.finish(10);case 18:return e.next=20,navigator.mediaDevices.enumerateDevices();case 20:f=e.sent.filter((function(e){return"videoinput"===e.kind})),l("Got the cameras: ".concat(f.map((function(e){return"".concat(e.deviceId,": ").concat(e.label)})).join(", "))),d=[],v=!0,h=!1,p=void 0,e.prev=24,m=f[Symbol.iterator]();case 26:if(v=(y=m.next()).done){e.next=41;break}return b=y.value,e.prev=28,e.next=31,navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:b.deviceId}});case 31:w=e.sent,d.push({mediaDeviceInfo:b,mediaStream:w}),e.next=38;break;case 35:e.prev=35,e.t1=e.catch(28),s(e.t1);case 38:v=!0,e.next=26;break;case 41:e.next=47;break;case 43:e.prev=43,e.t2=e.catch(24),h=!0,p=e.t2;case 47:e.prev=47,e.prev=48,v||null==m.return||m.return();case 50:if(e.prev=50,!h){e.next=53;break}throw p;case 53:return e.finish(50);case 54:return e.finish(47);case 55:l("Retrieved the streams of ".concat(d.map((function(e){return e.mediaDeviceInfo.deviceId})).join(", "))),r(d);case 57:case"end":return e.stop()}}),e,null,[[2,6,10,18],[11,,13,17],[24,43,47,55],[28,35],[48,,50,54]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){y(a,r,i,o,c,"next",e)}function c(e){y(a,r,i,o,c,"throw",e)}o(void 0)}))})()}),[r]),(0,i.useEffect)((function(){"undefined"!==typeof w&&(a>=t.length||(w.srcObject=t[a].mediaStream,w.oncanplaythrough=function(){"undefined"!==typeof w&&e(w)},w.play()))}),[t,a,e]),{video:w}}function j(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function k(){var e=j(["\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n\n  width: 100%;\n  aspect-ratio: 1/1;\n"]);return k=function(){return e},e}function C(){var e=j(["\n  width: 100%;\n  height: 100%;\n"]);return C=function(){return e},e}var I=a.Z.div(k()),S=a.Z.canvas(C()),E=function(){var e,n=(0,o.sJ)(h),t=(0,o.sJ)(p),a=function(){var e=(0,i.useRef)(null);return{setCanvasRef:function(n){if(null!==n&&(e.current=n.getContext("2d"),null===e.current))throw new Error("Can't retrieve the context!")},contextRef:e}}(),c=a.setCanvasRef,u=a.contextRef.current,f=g((function(e){if(null!==u){var n=512,t=e.videoHeight/(e.videoWidth/n);e.width=n,e.height=t,u.canvas.width=Math.min(n,t),u.canvas.height=Math.min(n,t)}})).video;return e=function(){null!==u&&"undefined"!==typeof f&&(u.clearRect(0,0,u.canvas.width,u.canvas.height),u.save(),n&&(u.translate(u.canvas.width,0),u.scale(-1,1)),u.drawImage(f,0,0),u.restore())},(0,i.useEffect)((function(){var n=setInterval((function(){e()}),1e3/30);return function(){clearInterval(n)}}),[e]),(0,i.useEffect)((function(){if(!(t<=0)&&null!==u){var e=document.createElement("a");e.download="Download-".concat(t,".png");var n=u.canvas.toDataURL("image/png");e.href=n.replace(/^data:image\/png/,"data:application/octet-stream"),e.click()}}),[t,u]),(0,r.jsx)(I,{children:(0,r.jsx)(S,{ref:c})})},O=t(3321),A=t(1675),Z=t(8462),_=t(2185),D=t(2585),P=t(1649);function R(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function z(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,c=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(u){c=!0,i=u}finally{try{o||null==t.return||t.return()}finally{if(c)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return R(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return R(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function M(){var e=N(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  align-items: center;\n\n  width: 100%;\n  margin-top: 1rem;\n"]);return M=function(){return e},e}function T(){var e=N(['\n  width: 4rem;\n  height: 4rem;\n  padding: 0;\n  border-radius: 50%;\n\n  &::after {\n    display: block;\n    content: "";\n\n    width: 3rem;\n    height: 3rem;\n    border-radius: 50%;\n    border: 1px solid ',";\n  }\n"]);return T=function(){return e},e}function F(){var e=N(["\n  width: 3rem;\n  height: 3rem;\n  min-width: auto;\n  border-radius: 50%;\n  padding: 0;\n"]);return F=function(){return e},e}function J(){var e=N(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n\n  font-size: 1.5rem;\n"]);return J=function(){return e},e}var U=a.Z.div(M()),V=(0,a.Z)(O.Z)(T(),(function(e){return e.theme.color.background})),X=(0,a.Z)(O.Z)(F()),$=a.Z.span(J()),G=function(){var e=(0,i.useState)(!1),n=e[0],t=e[1],a=(0,o.sJ)(d),c=z((0,o.FV)(h),2),u=c[0],f=c[1],l=z((0,o.FV)(p),2),s=l[0],m=l[1],y=z((0,o.FV)(v),2),b=(y[0],y[1]),w=function(e){return function(){b(e),t(!1)}};return(0,r.jsxs)(U,{children:[(0,r.jsx)(X,{variant:"outlined",children:(0,r.jsx)($,{children:(0,r.jsx)(D.kN6,{onClick:function(){f(!u)}})})}),(0,r.jsx)(V,{variant:"contained",onClick:function(){m(s+1)}}),(0,r.jsx)(X,{variant:"outlined",onClick:function(){t(!0)},children:(0,r.jsx)($,{children:(0,r.jsx)(P.do9,{})})}),(0,r.jsx)(A.Z,{open:n,onClose:function(){t(!1)},children:(0,r.jsx)(Z.Z,{children:a.map((function(e,n){return(0,r.jsx)(_.ZP,{button:!0,onClick:w(n),children:e.mediaDeviceInfo.label},n)}))})})]})};function H(){var e,n,t=(e=["\n  width: 100%;\n  height: 100%;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return H=function(){return t},t}var L=a.Z.div(H()),W=function(){return(0,r.jsxs)(L,{children:[(0,r.jsx)(E,{}),(0,r.jsx)(G,{})]})}}},function(e){e.O(0,[866,980,409,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);